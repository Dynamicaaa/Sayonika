<%- include('../../partials/header', { title: title }) %>
<link rel="stylesheet" href="/css/docs.css">

<!-- Mobile Menu Toggle -->
<button class="docs-mobile-toggle" id="docsMenuToggle">
    <i class="fas fa-bars"></i>
    <span>Menu</span>
</button>

<!-- Documentation Page -->
<div class="docs-page">
    <!-- Main Content -->
    <div class="docs-main">
        <div class="container">
            <div class="docs-layout">
                <!-- Sidebar Navigation -->
                <%- include('../../partials/docs-sidebar') %>

                <!-- Content Area -->
                <main class="docs-content" id="docsContent">
                    <!-- API Overview -->
                    <section class="docs-section" id="api-overview">
                        <h2>API Reference</h2>
                        <div class="section-content">
                            <p class="lead">
                                Sayonika provides a comprehensive REST API for managing mods, users, and platform data.
                                Our API is designed to be intuitive, well-documented, and easy to integrate.
                            </p>

                            <!-- Quick Start -->
                            <div class="alert info">
                                <i class="fas fa-rocket"></i>
                                <div>
                                    <strong>Quick Start:</strong> All API endpoints are available at <code>https://your-domain.com/api/</code>
                                    and require proper authentication for protected resources.
                                </div>
                            </div>

                            <!-- API Features -->
        <div class="feature-grid">
            <div class="feature-item">
                <h4><i class="fas fa-shield-alt"></i> Secure Authentication</h4>
                <p>JWT-based authentication with OAuth support for GitHub and Discord integration, plus account linking.</p>
            </div>

            <div class="feature-item">
                <h4><i class="fas fa-tachometer-alt"></i> Rate Limiting</h4>
                <p>Built-in rate limiting to ensure fair usage and protect against abuse with configurable limits.</p>
            </div>

            <div class="feature-item">
                <h4><i class="fas fa-code"></i> RESTful Design</h4>
                <p>Clean, predictable REST endpoints following industry best practices with comprehensive documentation.</p>
            </div>

            <div class="feature-item">
                <h4><i class="fas fa-file-code"></i> JSON Responses</h4>
                <p>Consistent JSON response format with detailed error messages and status codes.</p>
            </div>

            <div class="feature-item">
                <h4><i class="fas fa-users"></i> User Management</h4>
                <p>Complete user profile management including avatars, achievements, and OAuth account linking.</p>
            </div>

            <div class="feature-item">
                <h4><i class="fas fa-comments"></i> Community Features</h4>
                <p>Mod comments, ratings, achievements system, and user interaction endpoints.</p>
            </div>
        </div>

        <!-- Base URL -->
        <div class="alert info">
            <i class="fas fa-info-circle"></i>
            <div>
                <strong>Base URL:</strong> All API endpoints are relative to <code><%- process.env.BASE_URL || 'http://localhost:3000' %>/api</code>
            </div>
        </div>

        <!-- Quick Start -->
        <h3>Quick Start</h3>
        <p>Here's a simple example to get you started with the Sayonika API:</p>

        <div class="language-tabs">
            <div class="tab-buttons">
                <button class="tab-button" data-tab="curl-example">cURL</button>
                <button class="tab-button" data-tab="js-example">JavaScript</button>
                <button class="tab-button" data-tab="python-example">Python</button>
            </div>

            <div class="tab-content" id="curl-example">
                <div class="code-block">
                    <pre><code># Get all public mods
curl -X GET "<%- process.env.BASE_URL || 'http://localhost:3000' %>/api/mods" \
  -H "Accept: application/json"

# Get a specific mod
curl -X GET "<%- process.env.BASE_URL || 'http://localhost:3000' %>/api/mods/example-mod" \
  -H "Accept: application/json"</code></pre>
                </div>
            </div>

            <div class="tab-content" id="js-example">
                <div class="code-block">
                    <pre><code>// Using fetch API
const response = await fetch('<%- process.env.BASE_URL || 'http://localhost:3000' %>/api/mods');
const mods = await response.json();

console.log('Available mods:', mods);

// Get specific mod
const modResponse = await fetch('<%- process.env.BASE_URL || 'http://localhost:3000' %>/api/mods/example-mod');
const mod = await modResponse.json();

console.log('Mod details:', mod);</code></pre>
                </div>
            </div>

            <div class="tab-content" id="python-example">
                <div class="code-block">
                    <pre><code>import requests

# Get all mods
response = requests.get('<%- process.env.BASE_URL || 'http://localhost:3000' %>/api/mods')
mods = response.json()

print('Available mods:', mods)

# Get specific mod
mod_response = requests.get('<%- process.env.BASE_URL || 'http://localhost:3000' %>/api/mods/example-mod')
mod = mod_response.json()

print('Mod details:', mod)</code></pre>
                </div>
            </div>
        </div>

        <!-- API Sections -->
        <h3>API Sections</h3>
        <div class="quick-links">
            <div class="link-grid">
                <a href="/docs/api/authentication" class="quick-link">
                    <i class="fas fa-key"></i>
                    <div>
                        <h4>Authentication</h4>
                        <p>Learn how to authenticate with the API</p>
                    </div>
                </a>

                <a href="/docs/api/rate-limiting" class="quick-link">
                    <i class="fas fa-clock"></i>
                    <div>
                        <h4>Rate Limiting</h4>
                        <p>Understand API rate limits and headers</p>
                    </div>
                </a>

                <a href="/docs/api/response-format" class="quick-link">
                    <i class="fas fa-file-alt"></i>
                    <div>
                        <h4>Response Format</h4>
                        <p>Standard response structure and formats</p>
                    </div>
                </a>

                <a href="/docs/api/error-handling" class="quick-link">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <h4>Error Handling</h4>
                        <p>How to handle API errors gracefully</p>
                    </div>
                </a>
            </div>
        </div>

        <!-- Endpoints Overview -->
        <h3>Available Endpoints</h3>
        <div class="docs-notice">
            <i class="fas fa-info-circle"></i>
            <strong>Documentation Endpoints:</strong> Most POST endpoints have corresponding GET endpoints that provide detailed usage documentation and examples.
        </div>
        
        <table class="docs-table">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Base Path</th>
                    <th>Authentication</th>
                    <th>Key Features</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><a href="/docs/api/endpoints/auth">Authentication</a></td>
                    <td>Complete user authentication, profile management, and OAuth integration</td>
                    <td><code>/api/auth</code></td>
                    <td><span class="badge info">Public</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>Registration & Login (with docs)</li>
                            <li>Password Management</li>
                            <li>Profile & Avatar Management</li>
                            <li>Email Preferences</li>
                            <li>Admin Authentication</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><a href="/docs/api/endpoints/mods">Mods</a></td>
                    <td>Mod management, browsing, comments, and file operations</td>
                    <td><code>/api/mods</code></td>
                    <td><span class="badge warning">Mixed</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>Browse & Search Mods</li>
                            <li>Upload & Manage Mods</li>
                            <li>Comments System (with docs)</li>
                            <li>File Downloads</li>
                            <li>Admin Approval/Rejection</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><a href="/docs/api/endpoints/users">Users</a></td>
                    <td>User profiles, achievements, and social features</td>
                    <td><code>/api/users</code></td>
                    <td><span class="badge warning">Mixed</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>User Profiles</li>
                            <li>Achievement System</li>
                            <li>Leaderboards</li>
                            <li>User Statistics</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Support System</td>
                    <td>Support ticket creation and management system</td>
                    <td><code>/api/support</code></td>
                    <td><span class="badge warning">Mixed</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>Create Support Tickets (with docs)</li>
                            <li>Admin Ticket Management</li>
                            <li>Status & Priority Updates</li>
                            <li>Email Notifications</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Notifications</td>
                    <td>User notification system and interaction management</td>
                    <td><code>/api/notifications</code></td>
                    <td><span class="badge success">Auth Required</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>Mark Notifications Read (with docs)</li>
                            <li>Bulk Mark All Read</li>
                            <li>Notification Preferences</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><a href="/docs/api/endpoints/admin">Admin</a></td>
                    <td>Administrative functions, moderation, and system management</td>
                    <td><code>/api/admin</code></td>
                    <td><span class="badge danger">Admin</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>User Management</li>
                            <li>Mod Approval/Rejection</li>
                            <li>Support Ticket Management</li>
                            <li>System Logs & Monitoring</li>
                            <li>Settings Management</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><a href="/docs/api/endpoints/categories">Categories</a></td>
                    <td>Mod categories, tags, and classification system</td>
                    <td><code>/api/categories</code></td>
                    <td><span class="badge info">Public</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>Browse Categories</li>
                            <li>Category Statistics</li>
                            <li>Tag Management</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Settings</td>
                    <td>Public site settings and configuration</td>
                    <td><code>/api/settings</code></td>
                    <td><span class="badge info">Public</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>File Upload Limits</li>
                            <li>Site Configuration</li>
                            <li>Feature Flags</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Images</td>
                    <td>Image serving, processing, and manipulation</td>
                    <td><code>/api/images</code></td>
                    <td><span class="badge info">Public</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>Image Serving</li>
                            <li>Dynamic Resizing</li>
                            <li>Format Conversion</li>
                            <li>Optimization</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><a href="/docs/features/oauth">OAuth</a></td>
                    <td>OAuth authentication and account linking (GitHub/Discord)</td>
                    <td><code>/auth</code></td>
                    <td><span class="badge warning">Mixed</span></td>
                    <td>
                        <ul class="feature-list">
                            <li>GitHub OAuth Login</li>
                            <li>Discord OAuth Login</li>
                            <li>Account Linking</li>
                            <li>Admin OAuth Support</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- HTTP Status Codes -->
        <h3>HTTP Status Codes</h3>
        <p>The API uses standard HTTP status codes to indicate the success or failure of requests:</p>

        <table class="docs-table">
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Status</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="status-code success">200</span></td>
                    <td>OK</td>
                    <td>Request successful</td>
                </tr>
                <tr>
                    <td><span class="status-code success">201</span></td>
                    <td>Created</td>
                    <td>Resource created successfully</td>
                </tr>
                <tr>
                    <td><span class="status-code client-error">400</span></td>
                    <td>Bad Request</td>
                    <td>Invalid request parameters</td>
                </tr>
                <tr>
                    <td><span class="status-code client-error">401</span></td>
                    <td>Unauthorized</td>
                    <td>Authentication required</td>
                </tr>
                <tr>
                    <td><span class="status-code client-error">403</span></td>
                    <td>Forbidden</td>
                    <td>Insufficient permissions</td>
                </tr>
                <tr>
                    <td><span class="status-code client-error">404</span></td>
                    <td>Not Found</td>
                    <td>Resource not found</td>
                </tr>
                <tr>
                    <td><span class="status-code client-error">429</span></td>
                    <td>Too Many Requests</td>
                    <td>Rate limit exceeded</td>
                </tr>
                <tr>
                    <td><span class="status-code server-error">500</span></td>
                    <td>Internal Server Error</td>
                    <td>Server error occurred</td>
                </tr>
            </tbody>
        </table>

                            <!-- Getting Help -->
                            <div class="alert success">
                                <i class="fas fa-question-circle"></i>
                                <div>
                                    <strong>Need Help?</strong> If you have questions about the API or need assistance,
                                    feel free to <a href="https://github.com/Dynamicaaa/Sayonika/issues/new" target="_blank">create an issue</a>
                                    on our GitHub repository.
                                </div>
                            </div>
                        </div>
                    </section>
                </main>
            </div>
        </div>
    </div>
</div>

<!-- Sidebar Overlay for Mobile -->
<div class="docs-sidebar-overlay" id="sidebarOverlay"></div>

<script src="/js/docs.js?v=<%= Date.now() %>"></script>
<%- include('../../partials/footer') %>
